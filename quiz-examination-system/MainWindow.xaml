<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="quiz_examination_system.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:quiz_examination_system"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Quiz Examination System">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid x:Name="LoginPanel" Grid.RowSpan="2">
            <Border MaxWidth="400" Padding="24" CornerRadius="8" Background="{ThemeResource LayerFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Border.Shadow>
                    <ThemeShadow />
                </Border.Shadow>
                <StackPanel Spacing="16">
                    <TextBlock Text="Quiz Examination System" Style="{StaticResource TitleTextBlockStyle}" />
                    <TextBlock Text="Sign in to continue" Style="{StaticResource BodyTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                    <TextBox x:Name="UsernameBox" Header="Username" PlaceholderText="Enter username" />
                    <PasswordBox x:Name="PasswordBox" Header="Password" PlaceholderText="Enter password" />
                    <Button Content="Sign in" Click="Login_Click" HorizontalAlignment="Stretch" Style="{StaticResource AccentButtonStyle}" />
                    <InfoBar x:Name="LoginMessage" IsOpen="False" Severity="Error" IsClosable="False" />
                </StackPanel>
            </Border>
        </Grid>

        <Grid x:Name="DashboardPanel" Grid.RowSpan="2" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Grid Padding="24,16" Background="{ThemeResource LayerFillColorDefaultBrush}" ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <PersonPicture Width="32" Height="32" />
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock x:Name="WelcomeText" Style="{StaticResource BodyStrongTextBlockStyle}" />
                        <TextBlock x:Name="RoleText" Style="{StaticResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                    </StackPanel>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
                    <Button Content="Sign out" Click="Logout_Click" />
                </StackPanel>
            </Grid>

            <!-- NavigationView with sidebar -->
            <NavigationView x:Name="DashboardNav" Grid.Row="1" IsBackButtonVisible="Collapsed" IsSettingsVisible="False" PaneDisplayMode="Left" SelectionChanged="DashboardNav_SelectionChanged">
                <NavigationView.MenuItems>
                    <NavigationViewItem Content="Dashboard" Tag="Dashboard">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE80F;" />
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                    <NavigationViewItem Content="Change Password" Tag="Password">
                        <NavigationViewItem.Icon>
                            <FontIcon Glyph="&#xE72E;" />
                        </NavigationViewItem.Icon>
                    </NavigationViewItem>
                </NavigationView.MenuItems>

                <Grid Padding="32,24">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <StackPanel x:Name="DashboardView" Grid.Row="0" Spacing="24" Visibility="Visible">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Dashboard" Style="{StaticResource TitleTextBlockStyle}" />
                            <TextBlock x:Name="ActionsText" TextWrapping="Wrap" Style="{StaticResource BodyTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>

                        <StackPanel Spacing="12">
                            <Button x:Name="ManageUsersBtn" Content="Manage users" HorizontalAlignment="Left" IsEnabled="False" Click="ManageUsers_Click" Padding="16,8" />
                            <Button x:Name="ManageQuizzesBtn" Content="Manage quizzes" HorizontalAlignment="Left" IsEnabled="False" Click="ManageQuizzes_Click" Padding="16,8" />
                            <Button x:Name="ReviewAttemptsBtn" Content="Review attempts" HorizontalAlignment="Left" IsEnabled="False" Click="ReviewAttempts_Click" Padding="16,8" />
                            <Button x:Name="TakeQuizBtn" Content="Take quiz" HorizontalAlignment="Left" IsEnabled="False" Click="TakeQuiz_Click" Padding="16,8" Style="{StaticResource AccentButtonStyle}" />
                        </StackPanel>

                        <InfoBar x:Name="ActionMessage" IsOpen="False" Severity="Informational" IsClosable="True" Margin="0,12,0,0" />
                    </StackPanel>

                    <StackPanel x:Name="PasswordView" Grid.Row="0" Spacing="24" Visibility="Collapsed">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Change Password" Style="{StaticResource TitleTextBlockStyle}" />
                            <TextBlock Text="Update your account password" Style="{StaticResource BodyTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}" />
                        </StackPanel>

                        <StackPanel Spacing="12" MaxWidth="400">
                            <PasswordBox x:Name="CurrentPasswordBox" Header="Current password" PlaceholderText="Enter current password" />
                            <PasswordBox x:Name="NewPasswordBox" Header="New password" PlaceholderText="Enter new password" />
                            <PasswordBox x:Name="ConfirmPasswordBox" Header="Confirm password" PlaceholderText="Confirm new password" />
                            <Button Content="Update password" Click="ChangePassword_Click" Style="{StaticResource AccentButtonStyle}" Padding="16,8" />
                            <InfoBar x:Name="PasswordMessage" IsOpen="False" Severity="Success" IsClosable="False" />
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </NavigationView>
        </Grid>
    </Grid>
</Window>
