<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="quiz_examination_system.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:quiz_examination_system"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Quiz examination system">

    <Window.SystemBackdrop>
        <MicaBackdrop Kind="Base"/>
    </Window.SystemBackdrop>

    <Grid>
        <Grid x:Name="LoginPanel" Grid.RowSpan="2">
            <InfoBar x:Name="LoginMessage" 
                     IsOpen="False" 
                     IsClosable="True"
                     VerticalAlignment="Bottom"
                     HorizontalAlignment="Center"
                     MaxWidth="420"
                     Margin="0,0,0,80">
                <InfoBar.Shadow>
                    <ThemeShadow />
                </InfoBar.Shadow>
            </InfoBar>
            
            <Border MaxWidth="420" 
                   Padding="32" 
                   CornerRadius="12" 
                   Background="{ThemeResource LayerFillColorDefaultBrush}" 
                   BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" 
                   BorderThickness="1" 
                   HorizontalAlignment="Center" 
                   VerticalAlignment="Center">
                <Border.Shadow>
                    <ThemeShadow/>
                </Border.Shadow>
                
                <StackPanel Spacing="20">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Quiz examination system" 
                                 Style="{StaticResource TitleTextBlockStyle}"/>
                        <TextBlock Text="Sign in to continue" 
                                 Style="{StaticResource BodyTextBlockStyle}" 
                                 Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                    
                    <TextBox x:Name="UsernameBox" 
                           Header="Username" 
                           PlaceholderText="Enter username"/>
                    
                    <PasswordBox x:Name="PasswordBox" 
                               Header="Password" 
                               PlaceholderText="Enter password"/>
                    
                    <StackPanel Spacing="8">
                        <Button x:Name="LoginButton" 
                              Content="Sign in" 
                              Click="Login_Click" 
                              HorizontalAlignment="Stretch" 
                              Style="{StaticResource AccentButtonStyle}">
                            <Button.KeyboardAccelerators>
                                <KeyboardAccelerator Key="Enter"/>
                            </Button.KeyboardAccelerators>
                        </Button>
                        
                        <ProgressRing x:Name="LoginProgressRing" 
                                    IsActive="False" 
                                    Width="24" 
                                    Height="24"
                                    HorizontalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

        <Grid x:Name="DashboardPanel" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Padding="24,16" 
                 Background="{ThemeResource LayerOnMicaBaseAltFillColorTransparentBrush}" 
                 ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" Spacing="16" VerticalAlignment="Center">
                    <PersonPicture Width="40" Height="40"/>
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock x:Name="WelcomeText" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                        <TextBlock x:Name="RoleText" 
                                 Style="{StaticResource CaptionTextBlockStyle}" 
                                 Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </StackPanel>
                </StackPanel>

                <Button Grid.Column="1" 
                      Content="Sign out" 
                      Click="Logout_Click"/>
            </Grid>

            <Frame x:Name="ContentFrame" Grid.Row="1"/>
        </Grid>
    </Grid>
</Window>
